<%# Local variables: items [Hash] with keys :id, :title, :contributor, :count
                     table_name [String]
                     contributor [Boolean]
                     action [String] %>

<div class="item-table">
  <h2><%= table_name %></h2>

  <% if items && items.count > 0 %>

  <div class="result-info">
    Showing <%= @events.start_index %>-<%= @events.end_index %> of 
    <%= @events.total_results %> items.
  </div>

  <div class="download">
    <%= link_to "Download all #{action.downcase}",
                controller: :events,
                action: :show,
                start_date: current_start_date,
                end_date: current_end_date,
                format: :csv %>
  </div>

  <table>
    <tr>
      <th>Item</th>
      <% unless contributor %>
      <th>Contributor</th>
      <% end %>
      <th><%= action %></th>
    </tr>
    <% items.each do |e| %>
    <tr>
      <td>
        <a href="<%= "#{Settings.dpla.base_uri}item/#{e[:id]}" %>">
          <%= e[:title] %>
        </a>
      </td>
      <% unless contributor %>
      <td><%= e[:contributor] %></td>
      <% end %>
      <td><%= e[:count] %></td>
    </tr>
    <% end %>
  </table>
  <% else %>
    No activity to report from this time period.
  <% end %>
</div>
